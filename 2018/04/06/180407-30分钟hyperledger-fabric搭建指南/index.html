<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="专注于区块链行业应用"><title>180407|30分钟hyperledger-fabric搭建指南 | HackDApp专栏</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + '2224b1682cf112ad6e008fefcc371109';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">180407|30分钟hyperledger-fabric搭建指南</h1><a id="logo" href="/.">HackDApp专栏</a><p class="description">读万卷书＜行万里路＜阅人无数＜名师指路</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a><a href="/wiki"><i class="fa fa-rss"> 知识库</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">180407|30分钟hyperledger-fabric搭建指南</h1><div class="post-meta">Apr 6, 2018<span> | </span><span class="category"><a href="/categories/区块链技术/">区块链技术</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2,903</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 16</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><h1 id="30分钟hyperledger-fabric搭建指南"><a href="#30分钟hyperledger-fabric搭建指南" class="headerlink" title="30分钟hyperledger-fabric搭建指南"></a>30分钟hyperledger-fabric搭建指南</h1><p>本教程会带领大家在amazon的ec2实例机器上进行hyperledger-fabric的<code>环境搭建</code>以及<code>fabric-sample示例的合约安装与方法调用</code>。</p>
<p>为了保证大家在安装过程中的流畅性，特意对比了本地系统、阿里云、aws三种环境下的安装注程，综合对比后发现amazon机器实例不仅安装效率高、问题少，最关键的是<strong>12个月免费使用优惠</strong>，可以减少一些非fabric相关问题的干扰。</p>
<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><h3 id="创建-AWS-账户"><a href="#创建-AWS-账户" class="headerlink" title="创建 AWS 账户"></a>创建 AWS 账户</h3><p><img src="http://cdn.hackhook.com/2018-04-05-AWS%20Console%20-%20Signup.png" alt=""><br>整个注册过程，需要用到手机号、邮箱、信用卡。因注册过程较为简单，就不在此赘述。</p>
<p><strong>注册链接</strong>: <a href="https://portal.aws.amazon.com/billing/signup#/start" target="_blank" rel="noopener">https://portal.aws.amazon.com/billing/signup#/start</a></p>
<h3 id="创建机器实例"><a href="#创建机器实例" class="headerlink" title="创建机器实例"></a>创建机器实例</h3><h4 id="1-注册成功后，进入控制台界面"><a href="#1-注册成功后，进入控制台界面" class="headerlink" title="1. 注册成功后，进入控制台界面"></a>1. 注册成功后，进入控制台界面</h4><p><img src="http://cdn.hackhook.com/2018-04-05-us-west-2.console.aws.amazon.com_console_home_region-us-west-2.png" alt=""></p>
<h4 id="2-点击服务-在展开的列表中选择EC2实例"><a href="#2-点击服务-在展开的列表中选择EC2实例" class="headerlink" title="2. 点击服务, 在展开的列表中选择EC2实例"></a>2. 点击<code>服务</code>, 在展开的列表中选择<code>EC2实例</code></h4><p><img src="http://cdn.hackhook.com/2018-04-05-120548.jpg" alt=""></p>
<h4 id="3-点击启动实例"><a href="#3-点击启动实例" class="headerlink" title="3. 点击启动实例"></a>3. 点击<code>启动实例</code></h4><p><img src="http://cdn.hackhook.com/2018-04-05-122457.jpg" alt=""></p>
<h4 id="4-选择要创建的系统类型，选择ubuntu-16-04版本系统"><a href="#4-选择要创建的系统类型，选择ubuntu-16-04版本系统" class="headerlink" title="4. 选择要创建的系统类型，选择ubuntu 16.04版本系统"></a>4. 选择要创建的系统类型，选择<code>ubuntu 16.04</code>版本系统</h4><p><img src="http://cdn.hackhook.com/2018-04-05-123111.jpg" alt=""></p>
<h4 id="5-选择实例类型，点击审核和启动"><a href="#5-选择实例类型，点击审核和启动" class="headerlink" title="5. 选择实例类型，点击审核和启动"></a>5. 选择<code>实例类型</code>，点击<code>审核和启动</code></h4><p><img src="http://cdn.hackhook.com/2018-04-05-123639.jpg" alt=""></p>
<h4 id="6-进入实例启动检查页面，配置安全组"><a href="#6-进入实例启动检查页面，配置安全组" class="headerlink" title="6. 进入实例启动检查页面，配置安全组"></a>6. 进入实例启动检查页面，<code>配置安全组</code></h4><p><img src="http://cdn.hackhook.com/2018-04-05-130137.jpg" alt=""><br><img src="http://cdn.hackhook.com/2018-04-05-130612.jpg" alt=""><br><img src="http://cdn.hackhook.com/2018-04-05-130742.jpg" alt=""></p>
<h4 id="7-生成访问密钥并下载"><a href="#7-生成访问密钥并下载" class="headerlink" title="7. 生成访问密钥并下载"></a>7. <code>生成访问密钥</code>并下载</h4><p><img src="http://cdn.hackhook.com/2018-04-05-132047.jpg" alt=""><br>注：<strong>备份好生成的密钥文件</strong>，后面会用此文件进行远程ssh访问。</p>
<h4 id="8-查看机器实例公网IP"><a href="#8-查看机器实例公网IP" class="headerlink" title="8. 查看机器实例公网IP"></a>8. 查看机器实例<code>公网IP</code></h4><p><img src="http://cdn.hackhook.com/2018-04-05-133037.jpg" alt=""><br><img src="http://cdn.hackhook.com/2018-04-05-133332.jpg" alt=""></p>
<h3 id="远程连接EC2实例-SecureCRT"><a href="#远程连接EC2实例-SecureCRT" class="headerlink" title="远程连接EC2实例(SecureCRT)"></a>远程连接EC2实例(SecureCRT)</h3><h4 id="1-打开SecureCRT软件"><a href="#1-打开SecureCRT软件" class="headerlink" title="1. 打开SecureCRT软件"></a>1. 打开SecureCRT软件</h4><p><img src="http://cdn.hackhook.com/2018-04-05-134138.jpg" alt=""></p>
<h4 id="2-配置连接"><a href="#2-配置连接" class="headerlink" title="2. 配置连接"></a>2. 配置连接</h4><p><img src="http://cdn.hackhook.com/2018-04-05-133935.jpg" alt=""></p>
<h4 id="3-连接远程服务器"><a href="#3-连接远程服务器" class="headerlink" title="3. 连接远程服务器"></a>3. 连接远程服务器</h4><p><img src="http://cdn.hackhook.com/2018-04-05-134439.jpg" alt=""></p>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h3 id="1-安装go环境"><a href="#1-安装go环境" class="headerlink" title="1. 安装go环境"></a>1. 安装go环境</h3><h4 id="A-下载go安装包"><a href="#A-下载go安装包" class="headerlink" title="A. 下载go安装包"></a>A. 下载go安装包</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; wget https:<span class="regexp">//</span>storage.googleapis.com<span class="regexp">/golang/g</span>o1.<span class="number">9</span>.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="B-解压包"><a href="#B-解压包" class="headerlink" title="B. 解压包"></a>B. 解压包</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo tar -C /usr/local -xzf go1.<span class="number">9</span><span class="selector-class">.linux-amd64</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure>
<h4 id="C-配置环境变量"><a href="#C-配置环境变量" class="headerlink" title="C. 配置环境变量"></a>C. 配置环境变量</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑配置文件</span></span><br><span class="line">&gt; vi ~/.profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在文件末尾加入以下内容:</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOROOT</span>=/usr/local/go</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GOPATH</span>=<span class="variable">$HOME</span>/go</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$GOROOT/bin:$GOPATH/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载环境变量</span></span><br><span class="line">&gt; source ~/.profile</span><br></pre></td></tr></table></figure>
<h4 id="D-验证配置"><a href="#D-验证配置" class="headerlink" title="D. 验证配置"></a>D. 验证配置</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">go</span> <span class="keyword">version</span></span><br><span class="line"><span class="keyword">go</span> <span class="keyword">version</span> go1.<span class="number">9</span> linux/amd64</span><br></pre></td></tr></table></figure>
<p>显示<code>go version go1.9 linux/amd64</code>表示配置成功.</p>
<h3 id="2-安装docker及docker-compose"><a href="#2-安装docker及docker-compose" class="headerlink" title="2. 安装docker及docker-compose"></a>2. 安装docker及docker-compose</h3><h4 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 更新包</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo apt-get upgrade</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装docker</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo apt-get install -y docker.io</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动docker以及开机启动设置</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo systemctl start docker</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改当前用户所属用户组</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo usermod -aG docker ubuntu</span></span><br><span class="line">注意：一定要**注销并重新登录**配置才生效。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证docker是否安装成功</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> docker version</span></span><br><span class="line"></span><br><span class="line">Client:</span><br><span class="line"> Version:      1.13.1</span><br><span class="line"> API version:  1.26</span><br><span class="line"> Go version:   go1.6.2</span><br><span class="line"> Git commit:   092cba3</span><br><span class="line"> Built:        Thu Nov  2 20:40:23 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      1.13.1</span><br><span class="line"> API version:  1.26 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.6.2</span><br><span class="line"> Git commit:   092cba3</span><br><span class="line"> Built:        Thu Nov  2 20:40:23 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: false</span><br></pre></td></tr></table></figure>
<p>如能正确显示以上内容，则表明安装成功.</p>
<h4 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h4><p>Docker-compose是支持通过模板脚本批量创建Docker容器的一个组件。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装docker-compose</span></span><br><span class="line">&gt; sudo apt-<span class="keyword">get</span> install -y docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证是否安装成功</span></span><br><span class="line">&gt; docker-compose <span class="built_in">version</span></span><br><span class="line"></span><br><span class="line">docker-compose <span class="built_in">version</span> <span class="number">1.8</span><span class="number">.0</span>, build unknown</span><br><span class="line">docker-py <span class="built_in">version</span>: <span class="number">1.9</span><span class="number">.0</span></span><br><span class="line">CPython <span class="built_in">version</span>: <span class="number">2.7</span><span class="number">.12</span></span><br><span class="line">OpenSSL <span class="built_in">version</span>: OpenSSL <span class="number">1.0</span><span class="number">.2</span>g  <span class="number">1</span> Mar <span class="number">2016</span></span><br></pre></td></tr></table></figure>
<h3 id="3-安装fabric"><a href="#3-安装fabric" class="headerlink" title="3. 安装fabric"></a>3. 安装fabric</h3><h4 id="创建工程目录并进入该目录"><a href="#创建工程目录并进入该目录" class="headerlink" title="创建工程目录并进入该目录"></a>创建工程目录并进入该目录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> mkdir -p ~/go/src/github.com/hyperledger &amp;&amp; <span class="built_in">cd</span> <span class="string">"<span class="variable">$_</span>"</span></span></span><br></pre></td></tr></table></figure>
<h4 id="下载Hyperledger-Fabric-Samples"><a href="#下载Hyperledger-Fabric-Samples" class="headerlink" title="下载Hyperledger Fabric Samples"></a>下载<code>Hyperledger Fabric Samples</code></h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; git <span class="keyword">clone</span> <span class="title">https</span>://github.com/hyperledger/fabric-samples.git</span><br></pre></td></tr></table></figure>
<h4 id="拉取Fabric-docker依赖镜像"><a href="#拉取Fabric-docker依赖镜像" class="headerlink" title="拉取Fabric docker依赖镜像"></a>拉取Fabric docker依赖镜像</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">cd</span> ~/go/src/github.com/hyperledger/fabric-samples</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ./scripts/fabric-preload.sh</span></span><br></pre></td></tr></table></figure>
<h4 id="启动基础网络-orderer-peer-cli-chaincode"><a href="#启动基础网络-orderer-peer-cli-chaincode" class="headerlink" title="启动基础网络: orderer/peer/cli/chaincode"></a>启动基础网络: orderer/peer/cli/chaincode</h4><p>该基础网络主要包含：</p>
<ul>
<li>orderer容器：用于运行排序节点;</li>
<li>peer容器：用于运行普通的节点;</li>
<li>cli容器：用于运行客户端工具;</li>
<li>chaincode容器： 用于运行智能合约<br><code>docker-compose-simple.yaml</code>配置文件主要配置了以上四个容器的启动参数</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; cd ~/go/src/github.com/hyperledger/fabric-samples/chaincode-docker-devmode</span><br><span class="line">&gt; docker-compose -f docker-compose-simple.yaml up -d</span><br><span class="line"></span><br><span class="line">Creating orderer</span><br><span class="line">Creating peer</span><br><span class="line">Creating chaincode</span><br><span class="line">Creating cli</span><br></pre></td></tr></table></figure>
<p>启动容器之后，可以通过以下命令查看已启动服务:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker ps</span><br><span class="line"></span><br><span class="line">CONTAINER ID        IMAGE                        COMMAND                  CREATED              STATUS              PORTS                                            NAMES</span><br><span class="line"><span class="number">5203</span>bb0d7aaa        hyperledger/fabric-ccenv     <span class="string">"/bin/bash -c 'sle..."</span>   About <span class="selector-tag">a</span> minute ago   Up About <span class="selector-tag">a</span> minute                                                    chaincode</span><br><span class="line"><span class="number">78</span>bb278b7ac0        hyperledger/fabric-tools     <span class="string">"/bin/bash -c ./sc..."</span>   About <span class="selector-tag">a</span> minute ago   Up About <span class="selector-tag">a</span> minute                                                    cli</span><br><span class="line"><span class="number">707</span>df74a599b        hyperledger/fabric-peer      <span class="string">"peer node start -..."</span>   About <span class="selector-tag">a</span> minute ago   Up About <span class="selector-tag">a</span> minute   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">7051</span>-&gt;<span class="number">7051</span>/tcp, <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">7053</span>-&gt;<span class="number">7053</span>/tcp   peer</span><br><span class="line"><span class="number">7</span>f30502675f5        hyperledger/fabric-orderer   <span class="string">"orderer"</span>                About <span class="selector-tag">a</span> minute ago   Up About <span class="selector-tag">a</span> minute   <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">7050</span>-&gt;<span class="number">7050</span>/tcp                           orderer</span><br></pre></td></tr></table></figure>
<h4 id="编译合约并注册合约"><a href="#编译合约并注册合约" class="headerlink" title="编译合约并注册合约"></a>编译合约并注册合约</h4><h5 id="1-进入chaincode命令窗口"><a href="#1-进入chaincode命令窗口" class="headerlink" title="1. 进入chaincode命令窗口"></a>1. 进入chaincode命令窗口</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker exec -it chaincode bash</span><br><span class="line"><span class="comment">#命令窗口会进入以下状态:</span></span><br><span class="line">root<span class="variable">@5203bb0d7aaa</span><span class="symbol">:/opt/gopath/src/chaincode&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-编译合约文件"><a href="#2-编译合约文件" class="headerlink" title="2. 编译合约文件"></a>2. 编译合约文件</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@5203bb0d7aaa</span><span class="symbol">:/opt/gopath/src/chaincode&gt;</span> cd chaincode_example02/go</span><br><span class="line">root<span class="variable">@5203bb0d7aaa</span><span class="symbol">:/opt/gopath/src/chaincode&gt;</span> go build</span><br></pre></td></tr></table></figure>
<h5 id="3-注册合约"><a href="#3-注册合约" class="headerlink" title="3. 注册合约"></a>3. 注册合约</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@5203bb0d7aaa</span><span class="symbol">:/opt/gopath/src/chaincode&gt;</span> CORE_PEER_ADDRESS=<span class="symbol">peer:</span><span class="number">7051</span> CORE_CHAINCODE_ID_NAME=<span class="symbol">mycc:</span><span class="number">0</span> ./go</span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">02</span><span class="symbol">:</span><span class="number">52</span><span class="symbol">:</span><span class="number">23.128</span> UTC [shim] SetupChaincodeLogging -&gt; INFO <span class="number">001</span> Chaincode log level <span class="keyword">not</span> provided; defaulting <span class="symbol">to:</span> INFO</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">02</span><span class="symbol">:</span><span class="number">52</span><span class="symbol">:</span><span class="number">23.128</span> UTC [shim] SetupChaincodeLogging -&gt; INFO <span class="number">002</span> Chaincode (build <span class="symbol">level:</span> ) starting up ...</span><br><span class="line"><span class="comment"># 保持该窗口不要动，后续本窗口会打印合约调用时所输出的日志文件</span></span><br></pre></td></tr></table></figure>
<p><strong><em>注：保持当前窗口不要动，另开一个ssh连接窗口</em></strong></p>
<h4 id="安装合约-新开ssh窗口"><a href="#安装合约-新开ssh窗口" class="headerlink" title="安装合约(新开ssh窗口)"></a>安装合约(新开ssh窗口)</h4><h5 id="1-进入cli容器窗口"><a href="#1-进入cli容器窗口" class="headerlink" title="1. 进入cli容器窗口"></a>1. 进入<strong>cli容器窗口</strong></h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker exec -it cli bash</span><br><span class="line">root<span class="variable">@78bb278b7ac0</span><span class="symbol">:/opt/gopath/src/chaincodedev&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-安装合约"><a href="#2-安装合约" class="headerlink" title="2. 安装合约"></a>2. 安装合约</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@78bb278b7ac0:/opt/gopath/src/chaincodedev&gt;<span class="built_in"> peer </span>chaincode install -p chaincodedev/chaincode/chaincode_example02/go -n mycc -v 0</span><br><span class="line"></span><br><span class="line">2018-04-06 03:05:25.856 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-04-06 03:05:25.856 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining<span class="built_in"> default </span>signing identity</span><br><span class="line">2018-04-06 03:05:25.856 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; <span class="builtin-name">INFO</span> 003 Using<span class="built_in"> default </span>escc</span><br><span class="line">2018-04-06 03:05:25.856 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; <span class="builtin-name">INFO</span> 004 Using<span class="built_in"> default </span>vscc</span><br><span class="line">2018-04-06 03:05:25.910 UTC [golang-platform] getCodeFromFS -&gt; DEBU 005 getCodeFromFS chaincodedev/chaincode/chaincode_example02/go</span><br><span class="line">2018-04-06 03:05:26.061 UTC [golang-platform] func1 -&gt; DEBU 006 Discarding GOROOT package fmt</span><br><span class="line">2018-04-06 03:05:26.061 UTC [golang-platform] func1 -&gt; DEBU 007 Discarding provided package github.com/hyperledger/fabric/core/chaincode/shim</span><br><span class="line">2018-04-06 03:05:26.061 UTC [golang-platform] func1 -&gt; DEBU 008 Discarding provided package github.com/hyperledger/fabric/protos/peer</span><br><span class="line">2018-04-06 03:05:26.062 UTC [golang-platform] func1 -&gt; DEBU 009 Discarding GOROOT package strconv</span><br><span class="line">2018-04-06 03:05:26.062 UTC [golang-platform] GetDeploymentPayload -&gt; DEBU 00a done</span><br><span class="line">2018-04-06 03:05:26.064 UTC [msp/identity] Sign -&gt; DEBU 00b Sign: plaintext: 0AAD070A5B08031A0B08F6C79BD60510<span class="built_in">..</span>.2EE3DF010000FFFF2684EE73001C0000</span><br><span class="line">2018-04-06 03:05:26.064 UTC [msp/identity] Sign -&gt; DEBU 00c Sign: digest: CD77F89CECDF1935F58C06498D9F92F6D21537074322EA02582FDBD66B930C17</span><br><span class="line">2018-04-06 03:05:26.072 UTC [chaincodeCmd] install -&gt; DEBU 00d Installed remotely response:&lt;status:200 payload:<span class="string">"OK"</span> &gt;</span><br><span class="line">2018-04-06 03:05:26.072 UTC [main] main -&gt; <span class="builtin-name">INFO</span> 00e Exiting<span class="built_in">..</span><span class="built_in">..</span>.</span><br></pre></td></tr></table></figure>
<h4 id="3-合约方法调用"><a href="#3-合约方法调用" class="headerlink" title="3. 合约方法调用"></a>3. 合约方法调用</h4><h5 id="1-方法调用-初始化合约"><a href="#1-方法调用-初始化合约" class="headerlink" title="1) 方法调用: 初始化合约"></a>1) 方法调用: 初始化合约</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#a帐户与b帐户分别初始化为: 10000/20000</span></span><br><span class="line">root<span class="variable">@78bb278b7ac0</span><span class="symbol">:/opt/gopath/src/chaincodedev</span><span class="comment"># peer chaincode instantiate -n mycc -v 0 -c'&#123;"Args":["init","a","10000","b","20000"]&#125;' -C myc</span></span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.331</span> UTC [msp] GetLocalMSP -&gt; DEBU <span class="number">001</span> Returning existing local MSP</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.331</span> UTC [msp] GetDefaultSigningIdentity -&gt; DEBU <span class="number">002</span> Obtaining default signing identity</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.332</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">003</span> <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AAE070A5C08011A0C08BBC89BD6051<span class="number">0</span>...<span class="number">436</span>F6E666967426C6F636B0A036D7963</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.332</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">004</span> <span class="symbol">Sign:</span> <span class="symbol">digest:</span> F829A254295F3414E6BDA6A82D8BE68DEF6454E5C188EA39F8E351DAB978F39E</span><br><span class="line">......日志文件太长，删掉部分。</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.358</span> UTC [chaincodeCmd] InitCmdFactory -&gt; INFO 09e Get chain(myc) orderer <span class="symbol">endpoint:</span> <span class="symbol">orderer:</span><span class="number">7050</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.378</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 09f Using default escc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.378</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 0a<span class="number">0</span> Using default vscc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.379</span> UTC [msp/identity] Sign -&gt; DEBU 0a1 <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AB3070A6108031A0C08BBC89BD6051<span class="number">0</span>...<span class="number">30300</span>A000A04657363630A0476736363</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.379</span> UTC [msp/identity] Sign -&gt; DEBU 0a2 <span class="symbol">Sign:</span> <span class="symbol">digest:</span> FC2A829D28311280117CBBA89F11DBEC4513EBEF7382CADBFA0C97801CF5D7B9</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.396</span> UTC [msp/identity] Sign -&gt; DEBU 0a3 <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AB3070A6108031A0C08BBC89BD6051<span class="number">0</span>...<span class="number">46</span>F9365DC192E252C3D372FBD9F18FFD</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.396</span> UTC [msp/identity] Sign -&gt; DEBU 0a4 <span class="symbol">Sign:</span> <span class="symbol">digest:</span> <span class="number">48003437</span>C42BF212E6CC57A5F96B041624F4DAF4397E60A56C01D1D0AC8AE36A</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">06</span><span class="symbol">:</span><span class="number">35.403</span> UTC [main] main -&gt; INFO 0a5 Exiting.....</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询a帐户</span></span><br><span class="line">root<span class="variable">@78bb278b7ac0</span><span class="symbol">:/opt/gopath/src/chaincodedev</span><span class="comment"># peer chaincode query -n mycc -c '&#123;"Args":["query","a"]&#125;' -C myc</span></span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.415</span> UTC [msp] GetLocalMSP -&gt; DEBU <span class="number">001</span> Returning existing local MSP</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.415</span> UTC [msp] GetDefaultSigningIdentity -&gt; DEBU <span class="number">002</span> Obtaining default signing identity</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.415</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">003</span> Using default escc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.416</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">004</span> Using default vscc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.416</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">005</span> <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AB3070A6108031A0C08BDCA9BD6051<span class="number">0</span>...<span class="number">6</span>D7963631A0A0A0571756572790A0161</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.416</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">006</span> <span class="symbol">Sign:</span> <span class="symbol">digest:</span> <span class="number">37</span>D0A0ABA2A96041A6EF843251271558425ADDF69025809F0779B9B16491C25C</span><br><span class="line">Query <span class="symbol">Result:</span> <span class="number">10000</span> <span class="comment">#注：a帐户初始值</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">10</span><span class="symbol">:</span><span class="number">53.428</span> UTC [main] main -&gt; INFO <span class="number">007</span> Exiting.....</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询a帐户</span></span><br><span class="line">root<span class="variable">@78bb278b7ac0</span><span class="symbol">:/opt/gopath/src/chaincodedev</span><span class="comment"># peer chaincode query -n mycc -c '&#123;"Args":["query","b"]&#125;' -C myc</span></span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.778</span> UTC [msp] GetLocalMSP -&gt; DEBU <span class="number">001</span> Returning existing local MSP</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.778</span> UTC [msp] GetDefaultSigningIdentity -&gt; DEBU <span class="number">002</span> Obtaining default signing identity</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.778</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">003</span> Using default escc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.778</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">004</span> Using default vscc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.779</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">005</span> <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AB3070A6108031A0C08D2CB9BD6051<span class="number">0</span>...<span class="number">6</span>D7963631A0A0A0571756572790A0162</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.779</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">006</span> <span class="symbol">Sign:</span> <span class="symbol">digest:</span> <span class="number">64</span>DDC455282EC189BF10432AC0FD92457A2F47EBD2987D3325BF7DC37FD457BA</span><br><span class="line">Query <span class="symbol">Result:</span> <span class="number">20000</span> <span class="comment">#注：b帐户初始值</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">13</span><span class="symbol">:</span><span class="number">22.791</span> UTC [main] main -&gt; INFO <span class="number">007</span> Exiting.....</span><br></pre></td></tr></table></figure>
<h5 id="2-方法调用-转帐"><a href="#2-方法调用-转帐" class="headerlink" title="2) 方法调用: 转帐"></a>2) 方法调用: 转帐</h5><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># invoke to move 10 from a to b</span><br><span class="line">root@78bb278b7ac0:/opt/gopath/src/chaincodedev# peer chaincode invoke -n mycc -c '&#123;"Args":["invoke","a","b","10"]&#125;' -C myc</span><br><span class="line"></span><br><span class="line">2018-04-06 03:17:30.923 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-04-06 03:17:30.923 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-04-06 03:17:30.923 UTC [msp/identity] Sign -&gt; DEBU 003 Sign: plaintext: 0AAE070A5C08011A0C08CACD9BD60510...436F6E666967426C6F636B0A036D7963</span><br><span class="line">2018-04-06 03:17:30.923 UTC [msp/identity] Sign -&gt; DEBU 004 Sign: digest: 0308DC9AE35B3C4EC779057BFFEF94531159D3DB29CB3B1031F3933376976FCC</span><br><span class="line">......</span><br><span class="line">2018-04-06 03:17:30.990 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; DEBU 0a5 ESCC invoke result: version:1 response:&lt;status:200 message:"OK" &gt; payload:"<span class="symbol">\n</span> <span class="symbol">\3</span>65<span class="symbol">\2</span>15l<span class="symbol">\2</span>10<span class="symbol">\3</span>37<span class="symbol">\2</span>06<span class="symbol">\3</span>44s<span class="symbol">\3</span>23S8X<span class="symbol">\3</span>44<span class="symbol">\2</span>65<span class="symbol">\3</span>66e<span class="symbol">\2</span>45<span class="symbol">\2</span>53t<span class="symbol">\3</span>34<span class="symbol">\2</span>44<span class="symbol">\3</span>61<span class="symbol">\2</span>63fQ<span class="symbol">\2</span>67k<span class="symbol">\2</span>33<span class="symbol">\3</span>10p<span class="symbol">\3</span>02<span class="symbol">\2</span>57<span class="symbol">\0</span>22[<span class="symbol">\n</span>I<span class="symbol">\0</span>22<span class="symbol">\0</span>24<span class="symbol">\n</span><span class="symbol">\0</span>04lscc<span class="symbol">\0</span>22<span class="symbol">\0</span>14<span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\0</span>04mycc<span class="symbol">\0</span>22<span class="symbol">\0</span>02<span class="symbol">\0</span>10<span class="symbol">\0</span>01<span class="symbol">\0</span>221<span class="symbol">\n</span><span class="symbol">\0</span>04mycc<span class="symbol">\0</span>22)<span class="symbol">\n</span><span class="symbol">\0</span>07<span class="symbol">\n</span><span class="symbol">\0</span>01a<span class="symbol">\0</span>22<span class="symbol">\0</span>02<span class="symbol">\0</span>10<span class="symbol">\0</span>01<span class="symbol">\n</span><span class="symbol">\0</span>07<span class="symbol">\n</span><span class="symbol">\0</span>01b<span class="symbol">\0</span>22<span class="symbol">\0</span>02<span class="symbol">\0</span>10<span class="symbol">\0</span>01<span class="symbol">\0</span>32<span class="symbol">\t</span><span class="symbol">\n</span><span class="symbol">\0</span>01a<span class="symbol">\0</span>32<span class="symbol">\0</span>049990<span class="symbol">\0</span>32<span class="symbol">\n</span><span class="symbol">\n</span><span class="symbol">\0</span>01b<span class="symbol">\0</span>32<span class="symbol">\0</span>0520010<span class="symbol">\0</span>32<span class="symbol">\0</span>03<span class="symbol">\0</span>10<span class="symbol">\3</span>10<span class="symbol">\0</span>01<span class="symbol">\"</span><span class="symbol">\t</span><span class="symbol">\0</span>22<span class="symbol">\0</span>04mycc<span class="symbol">\0</span>32<span class="symbol">\0</span>010" endorsement:&lt;endorser:"<span class="symbol">\n</span><span class="symbol">\0</span>07DEFAULT<span class="symbol">\0</span>22<span class="symbol">\2</span>44<span class="symbol">\0</span>06-----BEGIN -----<span class="symbol">\n</span>MIICNjCCAd2gAwIBAgIRAMnf9/dmV9RvCCVw9pZQUfUwCgYIKoZIzj0EAwIwgYEx<span class="symbol">\n</span>CzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1TYW4g<span class="symbol">\n</span>RnJhbmNpc2NvMRkwFwYDVQQKExBvcmcxLmV4YW1wbGUuY29tMQwwCgYDVQQLEwND<span class="symbol">\n</span>T1AxHDAaBgNVBAMTE2NhLm9yZzEuZXhhbXBsZS5jb20wHhcNMTcxMTEyMTM0MTEx<span class="symbol">\n</span>WhcNMjcxMTEwMTM0MTExWjBpMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZv<span class="symbol">\n</span>cm5pYTEWMBQGA1UEBxMNU2FuIEZyYW5jaXNjbzEMMAoGA1UECxMDQ09QMR8wHQYD<span class="symbol">\n</span>VQQDExZwZWVyMC5vcmcxLmV4YW1wbGUuY29tMFkwEwYHKoZIzj0CAQYIKoZIzj0D<span class="symbol">\n</span>AQcDQgAEZ8S4V71OBJpyMIVZdwYdFXAckItrpvSrCf0HQg40WW9XSoOOO76I+Umf<span class="symbol">\n</span>EkmTlIJXP7/AyRRSRU38oI8Ivtu4M6NNMEswDgYDVR0PAQH/BAQDAgeAMAwGA1Ud<span class="symbol">\n</span>EwEB/wQCMAAwKwYDVR0jBCQwIoAginORIhnPEFZUhXm6eWBkm7K7Zc8R4/z7LW4H<span class="symbol">\n</span>ossDlCswCgYIKoZIzj0EAwIDRwAwRAIgVikIUZzgfuFsGLQHWJUVJCU7pDaETkaz<span class="symbol">\n</span>PzFgsCiLxUACICgzJYlW7nvZxP7b6tbeu3t8mrhMXQs956mD4+BoKuNI<span class="symbol">\n</span>-----END -----<span class="symbol">\n</span>" signature:"0E<span class="symbol">\0</span>02!<span class="symbol">\0</span>00<span class="symbol">\2</span>01<span class="symbol">\3</span>00bN<span class="symbol">\0</span>30<span class="symbol">\3</span>26<span class="symbol">\2</span>64<span class="symbol">\3</span>52<span class="symbol">\3</span>35bT<span class="symbol">\2</span>37<span class="symbol">\2</span>52<span class="symbol">\0</span>20|<span class="symbol">\0</span>10<span class="symbol">\t</span><span class="symbol">\0</span>24#<span class="symbol">\2</span>17(l`<span class="symbol">\2</span>15<span class="symbol">\2</span>67<span class="symbol">\2</span>31k<span class="symbol">\r</span><span class="variable">%\215\365&#123;\002 #4\357\000\234\034\3560\327\343\2375\277\364\036\207\372\264\237\344\333\032\215\240;\360\334\202:\325\341\365" &gt;</span></span><br><span class="line"><span class="variable">2018-04-06 03:17:30.990 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 0a6 Chaincode invoke successful. result: status:200</span></span><br><span class="line"><span class="variable">2018-04-06 03:17:30.991 UTC [main] main -&gt; INFO 0a7 Exiting.....</span></span><br></pre></td></tr></table></figure>
<h5 id="3-方法调用-查询"><a href="#3-方法调用-查询" class="headerlink" title="3) 方法调用: 查询"></a>3) 方法调用: 查询</h5><h6 id="查询帐户a"><a href="#查询帐户a" class="headerlink" title="查询帐户a"></a>查询帐户a</h6><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@78bb278b7ac0</span><span class="symbol">:/opt/gopath/src/chaincodedev</span><span class="comment"># peer chaincode query -n mycc -c '&#123;"Args":["query","a"]&#125;' -C myc</span></span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.812</span> UTC [msp] GetLocalMSP -&gt; DEBU <span class="number">001</span> Returning existing local MSP</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.812</span> UTC [msp] GetDefaultSigningIdentity -&gt; DEBU <span class="number">002</span> Obtaining default signing identity</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.812</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">003</span> Using default escc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.812</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">004</span> Using default vscc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.813</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">005</span> <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AB3070A6108031A0C0887CF9BD6051<span class="number">0</span>...<span class="number">6</span>D7963631A0A0A0571756572790A0161</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.813</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">006</span> <span class="symbol">Sign:</span> <span class="symbol">digest:</span> EB5D8C5E7DBE18348D884CFF60E6860F5787C0BFA73B774D579BD96565A1B70F</span><br><span class="line">Query <span class="symbol">Result:</span> <span class="number">9990</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">20</span><span class="symbol">:</span><span class="number">39.825</span> UTC [main] main -&gt; INFO <span class="number">007</span> Exiting.....</span><br></pre></td></tr></table></figure>
<h6 id="查询帐户b"><a href="#查询帐户b" class="headerlink" title="查询帐户b"></a>查询帐户b</h6><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@78bb278b7ac0</span><span class="symbol">:/opt/gopath/src/chaincodedev</span><span class="comment"># peer chaincode query -n mycc -c '&#123;"Args":["query","b"]&#125;' -C myc</span></span><br><span class="line"></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.208</span> UTC [msp] GetLocalMSP -&gt; DEBU <span class="number">001</span> Returning existing local MSP</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.208</span> UTC [msp] GetDefaultSigningIdentity -&gt; DEBU <span class="number">002</span> Obtaining default signing identity</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.208</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">003</span> Using default escc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.208</span> UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO <span class="number">004</span> Using default vscc</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.209</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">005</span> <span class="symbol">Sign:</span> <span class="symbol">plaintext:</span> 0AB2070A6008031A0B08E6CF9BD6051<span class="number">0</span>...<span class="number">6</span>D7963631A0A0A0571756572790A0162</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.209</span> UTC [msp/identity] Sign -&gt; DEBU <span class="number">006</span> <span class="symbol">Sign:</span> <span class="symbol">digest:</span> <span class="number">06</span>950383F096D62E19B50C664D31B7C47D85CB12812CB30BDCB86F613ADAA315</span><br><span class="line">Query <span class="symbol">Result:</span> <span class="number">20010</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">06</span> <span class="number">03</span><span class="symbol">:</span><span class="number">22</span><span class="symbol">:</span><span class="number">14.221</span> UTC [main] main -&gt; INFO <span class="number">007</span> Exiting.....</span><br></pre></td></tr></table></figure>
<hr>
<p>到此，整个fabric的安装部署以及合约的测试过程就算完成了。</p>
<p><code>注：在安装过程如果出现任何问题，欢迎加我微信(wechat:rushking2009)打扰。</code></p>
<p>同时欢迎关注以下我的个人公众号，了解最新动态。</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="http://cdn.hackhook.com/2018-03-27-164508.png" alt=""></h2><p><strong>参考资源</strong></p>
<ol>
<li><a href="http://hyperledger-fabric.readthedocs.io/en/latest/" target="_blank" rel="noopener">hyperledger-fabric官方文档</a></li>
<li><a href="http://www.cnblogs.com/aberic/p/7527831.html" target="_blank" rel="noopener">Hyperledger Fabric 1.0 从零开始（一）</a></li>
<li><a href="https://www.cnblogs.com/studyzy/p/7451276.html" target="_blank" rel="noopener">深入理解Fabric环境搭建的详细过程</a></li>
<li><a href="https://blog.csdn.net/so5418418/article/details/78355868" target="_blank" rel="noopener">区块链之Hyperledger（超级账本）Fabric v1.0 的环境搭建（超详细教程）</a></li>
</ol>
</div><div class="tags"><a href="/tags/区块链/">区块链</a><a href="/tags/hyedgper-fabric/">hyedgper-fabric</a></div><div class="post-nav"><a class="pre" href="/2018/04/13/发刊词-筑基修行录/">发刊词 | 筑基修行录</a><a class="next" href="/2018/04/04/Go格式化占位符/">Go格式化占位符</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hackdapp.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Inbox/">Inbox</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac日增一技/">Mac日增一技</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/区块链技术/">区块链技术</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习教程/">学习教程</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具推荐/">工具推荐</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术手册/">技术手册</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术架构/">技术架构</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/狸木匠周报/">狸木匠周报</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活随笔/">生活随笔</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/">编程语言</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/自我认知/">自我认知</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/自检清单/">自检清单</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/英语学习/">英语学习</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载文章/">转载文章</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/问题总结/">问题总结</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/思路/" style="font-size: 15px;">思路</a> <a href="/tags/hackhook/" style="font-size: 15px;">hackhook</a> <a href="/tags/认知/" style="font-size: 15px;">认知</a> <a href="/tags/工具推荐/" style="font-size: 15px;">工具推荐</a> <a href="/tags/ipfs/" style="font-size: 15px;">ipfs</a> <a href="/tags/区块链/" style="font-size: 15px;">区块链</a> <a href="/tags/复盘/" style="font-size: 15px;">复盘</a> <a href="/tags/hyedgper-fabric/" style="font-size: 15px;">hyedgper-fabric</a> <a href="/tags/通往财富自己之路/" style="font-size: 15px;">通往财富自己之路</a> <a href="/tags/日知录/" style="font-size: 15px;">日知录</a> <a href="/tags/精英日课/" style="font-size: 15px;">精英日课</a> <a href="/tags/每日回顾/" style="font-size: 15px;">每日回顾</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/问题解决/" style="font-size: 15px;">问题解决</a> <a href="/tags/友邻优课/" style="font-size: 15px;">友邻优课</a> <a href="/tags/写作套路/" style="font-size: 15px;">写作套路</a> <a href="/tags/插件开发/" style="font-size: 15px;">插件开发</a> <a href="/tags/站立办公桌/" style="font-size: 15px;">站立办公桌</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/dev/" style="font-size: 15px;">dev</a> <a href="/tags/A2/" style="font-size: 15px;">A2</a> <a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/电子diy/" style="font-size: 15px;">电子diy</a> <a href="/tags/Guava代码示例/" style="font-size: 15px;">Guava代码示例</a> <a href="/tags/wiki/" style="font-size: 15px;">wiki</a> <a href="/tags/Quick-Reference/" style="font-size: 15px;">Quick Reference</a> <a href="/tags/个人成长/" style="font-size: 15px;">个人成长</a> <a href="/tags/区块链技术/" style="font-size: 15px;">区块链技术</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/快捷键/" style="font-size: 15px;">快捷键</a> <a href="/tags/开发工具/" style="font-size: 15px;">开发工具</a> <a href="/tags/jpa/" style="font-size: 15px;">jpa</a> <a href="/tags/hibernate/" style="font-size: 15px;">hibernate</a> <a href="/tags/整理/" style="font-size: 15px;">整理</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/osgi/" style="font-size: 15px;">osgi</a> <a href="/tags/示例/" style="font-size: 15px;">示例</a> <a href="/tags/原创/" style="font-size: 15px;">原创</a> <a href="/tags/R/" style="font-size: 15px;">R</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/7/" style="font-size: 15px;">7</a> <a href="/tags/问题集锦/" style="font-size: 15px;">问题集锦</a> <a href="/tags/plan/" style="font-size: 15px;">plan</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/env/" style="font-size: 15px;">env</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/plugin/" style="font-size: 15px;">plugin</a> <a href="/tags/通往财富自由之路/" style="font-size: 15px;">通往财富自由之路</a> <a href="/tags/写作工具/" style="font-size: 15px;">写作工具</a> <a href="/tags/GTD/" style="font-size: 15px;">GTD</a> <a href="/tags/素质提升/" style="font-size: 15px;">素质提升</a> <a href="/tags/读书分享/" style="font-size: 15px;">读书分享</a> <a href="/tags/时间管理/" style="font-size: 15px;">时间管理</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/自动化发布/" style="font-size: 15px;">自动化发布</a> <a href="/tags/转摘/" style="font-size: 15px;">转摘</a> <a href="/tags/筑基修行录/" style="font-size: 15px;">筑基修行录</a> <a href="/tags/狸木匠知识分享/" style="font-size: 15px;">狸木匠知识分享</a> <a href="/tags/jekins/" style="font-size: 15px;">jekins</a> <a href="/tags/gradle/" style="font-size: 15px;">gradle</a> <a href="/tags/springboot/" style="font-size: 15px;">springboot</a> <a href="/tags/YLYK/" style="font-size: 15px;">YLYK</a> <a href="/tags/hexo问题/" style="font-size: 15px;">hexo问题</a> <a href="/tags/李笑来/" style="font-size: 15px;">李笑来</a> <a href="/tags/自我提升/" style="font-size: 15px;">自我提升</a> <a href="/tags/文具收集/" style="font-size: 15px;">文具收集</a> <a href="/tags/paw/" style="font-size: 15px;">paw</a> <a href="/tags/宝宝成长/" style="font-size: 15px;">宝宝成长</a> <a href="/tags/每日一贴/" style="font-size: 15px;">每日一贴</a> <a href="/tags/linux命令/" style="font-size: 15px;">linux命令</a> <a href="/tags/收集/" style="font-size: 15px;">收集</a> <a href="/tags/狸木匠周报/" style="font-size: 15px;">狸木匠周报</a> <a href="/tags/GOF/" style="font-size: 15px;">GOF</a> <a href="/tags/资源分享/" style="font-size: 15px;">资源分享</a> <a href="/tags/显性化思维/" style="font-size: 15px;">显性化思维</a> <a href="/tags/产品设计/" style="font-size: 15px;">产品设计</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/13/发刊词-筑基修行录/">发刊词 | 筑基修行录</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/06/180407-30分钟hyperledger-fabric搭建指南/">180407|30分钟hyperledger-fabric搭建指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/04/Go格式化占位符/">Go格式化占位符</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/28/180328-3月自我复盘/">180328|3月自我复盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/21/180321-iPic图床神器/">180321|iPic图床神器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/13/180314-基于IPFS搭建去中心化博客/">180314|基于IPFS搭建去中心化博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/06/180307-领导力与幸福/">180307 | 领导力与幸福</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/27/180228-转变/">180228 | 转变</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/06/180207-区块链简易入门/">180207|区块链简易入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/28/180128-入局首篇，随心往之/">180128 | 入局首篇，随心往之</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://program-think.blogspot.com/" title="编程随想" target="_blank">编程随想</a><ul></ul><a href="http://zhibimo.com/" title="知笔墨" target="_blank">知笔墨</a><ul></ul><a href="http://www.typing-lessons.org" title="keyboard" target="_blank">keyboard</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">HackDApp专栏.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>